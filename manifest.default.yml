info:
  name: service-name
  description:
  version: "1.0"
  category:
  owner:
    name: name
    email: example@example.com
  build_version: "{{ info.version }}.{{ vars.build_number }}"
  full_name: "{{ info.category }}/{{ info.name }}"
  full_name_version: "{{ info.full_name }}-v{{ info.build_version }}"

vars:
  env: dev
  build_number: 0

marathon:
  host: marathon.example.com
  registry_url: "http://{{ marathon.host }}/task-registry/{{ info.full_name }}/{{ info.name }}-v{{ info.build_version }}.tar.gz"

consul:
  host: consul.example.com

build:
  sbt-pack:
    version: "{{ info.build_version }}"

  marathon:
    source: "target/pack"
    registry_url: "{{ marathon.registry_url }}"

deploy:
  marathon:
    consul_host: "{{ consul.host }}"
    marathon_host: "{{ marathon.host }}"
    app_name: "{{ info.full_name_version }}"
    package_uri: "{{ marathon.registry_url }}"
    instances: 1
    mem: 128
    cpu: 0.1
    cmd: "bin/start"
    constraints: ""
    environment:
      ENV: "{{ vars.env }}"
      SERVICE_NAME: "{{ info.name }}"
      SERVICE_VERSION: "{{ info.build_version }}"
      MEMORY: "{{ deploy.marathon.mem }}"

release:
  consul_host: "{{ consul.host }}"
  marathon_host: "{{ marathon.host }}"
  full_name: "{{ info.full_name }}"
  full_name_version: "{{ info.full_name_version }}"
  route: "{{ vars.route }}"
  routes:
    - host: test.example.com
      location: /
