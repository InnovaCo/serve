info:
  name: test-package
  description: Test package
  version: "1.0"
  category: facade
  owner:
    name: Boltnev Dmitriy
    email: dmitriy.boltnev@inn.ru

include:
  - file: samza-task.yml

build:
  - sh: "mkdir -p target/pack && touch target/pack/index.txt"
  - sbt_pack: {}
  - marathon: {}
  - sh: "echo 'Hello, World!'"

test: &some_test
  hello: a {{ vars.hello }}
  name: Dima
  new ? {{ vars.env }}:
    qa: Dima-Qa
    live: Dima-Live
    dev: Dima-Dev

consul:
  host ? {{ vars.env }}:
    qa: localhost
    live: localhost
 
release:
  routes:
    - host ? {{vars.branch}}-{{vars.env}}:
        "-live": "~^(.+\\.)?kidzite.space$;"
        "-qa": "~^(.+\\.)?kidzite.qa$;"
        "*": "{{vars.branch}}.kidzite.qa"
      location: /

result:
  << : *some_test
  surname: kulikov
  name: Misha
