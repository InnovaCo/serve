info:
  name: forgame-test
  description: 4game Test
  version: "2.1"
  category: facade
  owner:
    name: Dmitry Kulikov
    email: kulikov.dm@gmail.com

include:
  - file: samza-task.yml

build:
  marathon:
    - sh: "mkdir -p target/pack && touch target/pack/index.txt"
    - sbt_pack: {}
    - marathon: {}
    - sh: "echo 'Hello, World!'"
  debian:
    install_root: "/local/innova/www-versions"
    maintainer_name: "Continuous Integration"
    maintainer_email: "bamboo@inn.ru"
    section: "tools"
    description: "{{info.description}}"
    daemon_args: "echo Start"
    service_owner: "innova"
    daemon_user: "innova"
    daemon: "no"
    daemon_port:
    make_pidfile: "false"
    depends:
    section: "{{info.category}}"
    init: "debian-way"
    category: "{{info.category}}"


test: &some_test
  hello: a {{ vars.hello }}
  name: Dima
  new ? {{ vars.env }}:
    qa: Dima-Qa
    live: Dima-Live
    dev: Dima-Dev

deploy:
  marathon:
    instances: 3
    mem: 512
    cpu: 1
    cmd: "bin/mesos-start"
    constraints: "kidz:true"

release:
  routes:
    - host ? {{ vars.env }}: { qa: api2.kidzite.qa, live: api2.kidzite.space }

result:
  << : *some_test
  surname: kulikov
  name: Misha
