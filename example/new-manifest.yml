info:
  name: forgame-api2
  description: 4game REST API v2
  version: "2.1"
  category: services/facade
  owner:
    name: Dmitry Kulikov
    email: kulikov.dm@gmail.com

include:
  - file: samza-task.yml

build:
  - sh: "mkdir -p target/pack && touch target/pack/index.txt"
  - sbt_pack: {}
  - marathon: {}
  - sh: "echo 'Hello, World!'"

test: &some_test
  hello: a {{ vars.hello }}
  name: Dima
  new ? {{ vars.env }}:
    qa: Dima-Qa
    live: Dima-Live
    dev: Dima-Dev

deploy:
  marathon:
    instances: 3
    mem: 512
    cpu: 1
    cmd: "bin/mesos-start"
    constraints: "kidz:true"

release:
  routes:
    - host ? {{ vars.env }}: { qa: api2.kidzite.qa, live: api2.kidzite.space }

result:
  << : *some_test
  surname: kulikov
  name: Misha
